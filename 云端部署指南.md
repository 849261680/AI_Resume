# AI简历优化助手云端部署指南

## 一、阿里云ECS部署方案（推荐）

### 1. 服务器准备
- 注册阿里云账号：https://account.aliyun.com/
- 购买ECS云服务器（建议配置）：
  * 地域：华东2（上海）或者离您目标用户较近的区域
  * 配置：2核4GB内存起步
  * 操作系统：Ubuntu 20.04 或 CentOS 8
  * 带宽：5Mbps起步
  * 购买时记得设置安全组，开放80、443和8000端口

### 2. 域名和备案
- 购买域名（阿里云万网）
- 进行域名备案（中国大陆地区必须，约1-2周时间）
- 设置域名解析，将域名指向您的ECS服务器IP

### 3. 环境配置
```bash
# 更新系统
sudo apt update && sudo apt upgrade -y  # Ubuntu
# 或
sudo yum update -y  # CentOS

# 安装Docker和Docker Compose
curl -fsSL https://get.docker.com | sh
sudo systemctl enable docker
sudo systemctl start docker
sudo curl -L "https://github.com/docker/compose/releases/download/v2.15.1/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
sudo chmod +x /usr/local/bin/docker-compose

# 安装Git
sudo apt install git -y  # Ubuntu
# 或
sudo yum install git -y  # CentOS
```

### 4. 部署应用
```bash
# 克隆项目（假设您已将代码推送到GitHub）
git clone https://github.com/YOUR_USERNAME/AI_jianli.git
cd AI_jianli

# 配置环境变量
cp .env.example .env
# 编辑.env文件，填入您的DeepSeek API密钥
nano .env  # 或者 vim .env

# 启动Docker服务
sudo docker-compose up -d --build

# 查看服务状态
sudo docker-compose ps
```

### 5. 设置HTTPS（推荐使用Let's Encrypt免费证书）
```bash
# 安装certbot
sudo apt install certbot python3-certbot-nginx -y  # Ubuntu
# 或
sudo yum install certbot python3-certbot-nginx -y  # CentOS

# 获取证书
sudo certbot --nginx -d your-domain.com
```

## 二、腾讯云轻量应用服务器部署方案

腾讯云轻量应用服务器是一种更简单的部署方式，适合个人开发者。

### 1. 服务器准备
- 注册腾讯云账号：https://cloud.tencent.com/
- 购买轻量应用服务器（建议选择"应用镜像"中的Docker）
- 选择配置：2核4GB起步
- 设置防火墙，开放80、443和8000端口

### 2. 部署步骤与阿里云类似，但更简单

## 三、华为云WebApp部署方案

华为云提供了WebApp引擎，比传统ECS部署更简单。

### 1. 准备工作
- 注册华为云账号
- 开通WebApp引擎服务

### 2. 简化部署步骤
```bash
# 在本地安装华为云命令行工具
pip install huaweicloud-cli

# 登录华为云
hcloud configure

# 部署应用
hcloud webapp deploy --app-name resume-optimizer --repo YOUR_GIT_REPO
```

## 四、自动化部署与更新

### 设置自动部署流水线
```bash
# 在项目根目录创建.github/workflows/deploy.yml文件
mkdir -p .github/workflows
cat > .github/workflows/deploy.yml << EOF
name: Deploy to Cloud Server

on:
  push:
    branches: [ main ]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      
      - name: Deploy to server
        uses: appleboy/ssh-action@master
        with:
          host: \${{ secrets.SERVER_IP }}
          username: \${{ secrets.SERVER_USER }}
          key: \${{ secrets.SSH_PRIVATE_KEY }}
          script: |
            cd /path/to/AI_jianli
            git pull
            docker-compose down
            docker-compose up -d --build
EOF
```

## 五、CDN加速配置（可选）

如果您的应用访问量较大，建议配置CDN加速：

1. 在阿里云/腾讯云控制台开通CDN服务
2. 添加加速域名，源站类型选择"源站域名"
3. 设置缓存规则：
   - 静态资源（js/css/images）：缓存时间设置为1周或更长
   - HTML文件：缓存时间设置为较短或不缓存
   - API请求：不缓存

## 六、服务监控与告警（推荐）

### 1. 阿里云云监控
```bash
# 安装阿里云监控组件
wget http://update.aegis.aliyun.com/download/install_cloudmonitor_linux.sh
chmod +x install_cloudmonitor_linux.sh
./install_cloudmonitor_linux.sh

# 在阿里云控制台配置告警规则
```

### 2. 简单的健康检查脚本
```bash
cat > /root/health_check.sh << EOF
#!/bin/bash
response=\$(curl -s -o /dev/null -w "%{http_code}" http://localhost:80)
if [ \$response != "200" ]; then
  echo "Website down! Restarting services..."
  cd /path/to/AI_jianli
  docker-compose restart
  # 发送告警邮件
  echo "Website down at \$(date)" | mail -s "Website Alert" your-email@example.com
fi
EOF
chmod +x /root/health_check.sh

# 添加定时任务
echo "*/5 * * * * /root/health_check.sh" | crontab -
```

## 七、成本估算

| 服务提供商 | 服务类型 | 配置 | 月费用估算 |
|------------|----------|------|------------|
| 阿里云 | ECS云服务器 | 2核4GB | ¥99-199/月 |
| 腾讯云 | 轻量应用服务器 | 2核4GB | ¥69-129/月 |
| 华为云 | WebApp | 基础配置 | ¥50-150/月 |

以上价格仅供参考，实际价格请以官网为准。

## 八、上线前检查清单

- [ ] DeepSeek API密钥配置正确
- [ ] 所有服务都正常运行
- [ ] HTTPS证书已安装并生效
- [ ] 数据备份策略已实施
- [ ] 监控和告警已配置
- [ ] 防火墙规则已配置
- [ ] 域名已解析到服务器IP
- [ ] 负载测试已完成（如有需要） 